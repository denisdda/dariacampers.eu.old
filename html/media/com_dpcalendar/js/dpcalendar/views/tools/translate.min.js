!function(){"use strict";
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */document.addEventListener("DOMContentLoaded",(function(){loadDPAssets(["/com_dpcalendar/js/dpcalendar/dpcalendar.js"],(function(){
// Credit https://github.com/rxaviers/async-pool
function e(e,t){var n=0,r=[],a=[];return function u(){if(n===e.length)return Promise.resolve();var c=Promise.resolve().then((function(){return t(e[n++],e)}));r.push(c);var o=c.then((function(){return a.splice(a.indexOf(o),1)}));a.push(o);var s=Promise.resolve();return a.length>=3&&(s=Promise.race(a)),s.then((function(){return u()}))}().then((function(){return Promise.all(r)}))}e(document.querySelectorAll(".com-dpcalendar-tools-translate .dp-resource"),(function(e){return new Promise((function(t){DPCalendar.request("task=translate.fetch",(function(n){for(var r in n.languages){var a=n.languages[r],u=e.querySelector('.dp-resource__language[data-language="'+a.tag+'"] .dp-resource__percentage');if(u){u.innerHTML=a.percent+"%";var c="success";a.percent<30?c="important":a.percent<50?c="warning":a.percent<100&&(c="info"),u.parentElement.classList.add("dp-resource_"+c)}}t()}),"resource="+e.getAttribute("data-slug"))}))})),Joomla.submitbutton=function(t){return"translate.update"!=t||e(document.querySelectorAll(".com-dpcalendar-tools-translate .dp-resource:nth-child(-n+6)"),(function(e){return new Promise((function(t){DPCalendar.request("task=translate.update",(function(n){e.querySelector(".dp-resource__icon i").setAttribute("class","icon-checkmark-circle"),t()}),"resource="+e.getAttribute("data-slug"))}))})),!0}}))}))}();