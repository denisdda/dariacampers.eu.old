!function(){"use strict";
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */
document.addEventListener("DOMContentLoaded",(function(){loadDPAssets(["/com_dpcalendar/js/dpcalendar/dpcalendar.js"],(function(){var e=document.querySelector(".com-dpcalendar-list, .com-dpcalendar-blog, .com-dpcalendar-timeline"),t=e.querySelector(".dp-input_location");t&&1==t.dataset.dpAutocomplete&&loadDPAssets(["/com_dpcalendar/js/dpcalendar/layouts/block/autocomplete.js"],(function(){DPCalendar.autocomplete.create(t),t.addEventListener("dp-autocomplete-select",(function(){e.querySelector(".dp-form:not(.dp-timezone)").submit()})),t.addEventListener("dp-autocomplete-change",(function(e){var n="location.searchloc";-1==window.location.href.indexOf("administrator")&&(n="locationform.searchloc"),DPCalendar.request("task="+n+"&loc="+encodeURIComponent(e.target.value.trim()),(function(e){DPCalendar.autocomplete.setItems(t,e.data)}))}))}));var n=e.querySelector(".dp-map");n&&([n].forEach((function(e){"IntersectionObserver"in window!=0?new IntersectionObserver((function(t,n){t.forEach((function(t){t.isIntersecting&&(n.unobserve(e),loadDPAssets(["/com_dpcalendar/js/dpcalendar/map.js"],(function(){return DPCalendar.Map.create(e)})))}))})).observe(e):loadDPAssets(["/com_dpcalendar/js/dpcalendar/map.js"],(function(){return DPCalendar.Map.create(e)}))})),t&&t.getAttribute("data-latitude")&&t.getAttribute("data-longitude")&&n.addEventListener("dp-map-loaded",(function(){DPCalendar.Map.drawCircle(n,{latitude:t.getAttribute("data-latitude"),longitude:t.getAttribute("data-longitude")},e.querySelector(".dp-input[name=radius]").value,e.querySelector('.dp-input[name="length-type"]').value)}))),[].slice.call(e.querySelectorAll(".dp-button-bar__actions .dp-button-search")).forEach((function(t){t.addEventListener("click",(function(t){return t.preventDefault(),DPCalendar.slideToggle(e.querySelector(".dp-form:not(.dp-timezone)")),!1}))})),[].slice.call(e.querySelectorAll(".dp-input, .dp-select")).forEach((function(e){e.addEventListener("change",(function(){
// If autocomplete is activated, do nothing
"location"==e.name&&e.nextElementSibling||e.form.submit()}))}));var o=e.querySelector(".dp-form:not(.dp-timezone) .dp-button-search");if(o&&(o.addEventListener("click",(function(){e.querySelector(".dp-form:not(.dp-timezone)").submit()})),loadDPAssets(["/com_dpcalendar/js/dpcalendar/layouts/block/datepicker.js","/com_dpcalendar/js/dpcalendar/layouts/block/timepicker.js"])),(o=e.querySelector(".dp-form:not(.dp-timezone) .dp-button-clear"))&&o.addEventListener("click",(function(n){return n.preventDefault(),[].slice.call(e.querySelectorAll('.dp-input:not([name="Itemid"])')).forEach((function(e){e.value=""})),t&&(e.querySelector("[name=radius]").value=20,e.querySelector("[name=length-type]").value="m"),e.querySelector(".dp-form:not(.dp-timezone)").submit(),!1})),(o=e.querySelector(".dp-form:not(.dp-timezone) .dp-button-current-location"))&&(o.addEventListener("click",(function(e){return e.preventDefault(),DPCalendar.currentLocation((function(t){var n=e.target.closest(".dp-form:not(.dp-timezone)");n.querySelector("[name=location]").value=t,n.submit()})),!1})),!1 in navigator&&(o.style.display="none")),!(document.body.clientWidth<768)){var a=null;[].slice.call(e.querySelectorAll(".com-dpcalendar-timeline .dp-event")).forEach((function(e){null==a||a.clientHeight<300||(e.querySelector(".dp-event__dot").style.marginTop="-200px",e.querySelector(".dp-event__information").style.marginTop="-200px"),a=e}))}}))}))}();