!function(){"use strict";
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */
document.addEventListener("DOMContentLoaded",(function(){var e=["/com_dpcalendar/js/dpcalendar/dpcalendar.js"];document.querySelector(".dp-search-map .dp-form")&&(e.push("/com_dpcalendar/js/dpcalendar/layouts/block/datepicker.js"),e.push("/com_dpcalendar/js/dpcalendar/layouts/block/timepicker.js")),loadDPAssets(e,(function(){var e=function(e){var t=e.querySelector(".dp-map");null!=t&&t.dpmap&&DPCalendar.request("view=map&layout=events&format=raw",(function(a){DPCalendar.Map.clearMarkers(t),a.data.events.forEach((function(e){e.location.forEach((function(a){var n=JSON.parse(JSON.stringify(a));n.title=e.title,n.color=e.color,n.description=e.description,DPCalendar.Map.createMarker(t,n)}))})),a.data.location&&-1!=e.querySelector(".dp-input[name=radius]").value&&DPCalendar.Map.drawCircle(t,a.data.location,e.querySelector(".dp-input[name=radius]").value,e.querySelector('.dp-input[name="length-type"]').value)}),DPCalendar.formToQueryString(e.querySelector(".dp-form:not(.dp-timezone)")))};[].slice.call(document.querySelectorAll(".dp-search-map")).forEach((function(t){[].slice.call(t.querySelectorAll(".dp-input, .dp-select:not(.dp-timezone__select)")).forEach((function(a){a.addEventListener("change",(function(a){return a.preventDefault(),e(t),!1}))})),t.addEventListener("click",(function(e){if(!e.target||!e.target.matches(".dp-event-tooltip__link"))return!0;if(window.innerWidth<600)return!0;e.preventDefault();var a=t.closest(".dp-search-map");return 1==a.dataset.popup?
// Opening the modal box
DPCalendar.modal(e.target.getAttribute("href"),a.dataset.popupwidth,a.dataset.popupheight):0==a.dataset.popup&&(window.location=DPCalendar.encode(e.target.getAttribute("href"))),!1})),t.querySelector(".dp-map").addEventListener("dp-map-loaded",(function(){return e(t)})),t.querySelectorAll(".dp-map").forEach((function(e){"IntersectionObserver"in window!=0?new IntersectionObserver((function(t,a){t.forEach((function(t){t.isIntersecting&&(a.unobserve(e),loadDPAssets(["/com_dpcalendar/js/dpcalendar/map.js"],(function(){return DPCalendar.Map.create(e)})))}))})).observe(e):loadDPAssets(["/com_dpcalendar/js/dpcalendar/map.js"],(function(){return DPCalendar.Map.create(e)}))}));var a=t.querySelector(".dp-input_location");a&&1==a.dataset.dpAutocomplete&&loadDPAssets(["/com_dpcalendar/js/dpcalendar/layouts/block/autocomplete.js"],(function(){DPCalendar.autocomplete.create(a),a.addEventListener("dp-autocomplete-select",(function(a){e(t)})),a.addEventListener("dp-autocomplete-change",(function(e){var t="location.searchloc";-1==window.location.href.indexOf("administrator")&&(t="locationform.searchloc"),DPCalendar.request("task="+t+"&loc="+encodeURIComponent(e.target.value.trim()),(function(e){DPCalendar.autocomplete.setItems(a,e.data)}))}))}));var n=t.querySelector(".dp-button-search");n&&n.addEventListener("click",(function(a){return a.preventDefault(),e(t),!1})),(n=t.querySelector(".dp-button-clear"))&&n.addEventListener("click",(function(a){a.preventDefault(),[].slice.call(t.querySelectorAll('.dp-input:not([name="Itemid"])')).forEach((function(e){e.value=""}));var n=t.querySelector("[name=radius]");n.value=n.getAttribute("data-default")?n.getAttribute("data-default"):20;var r=t.querySelector("[name=length-type]");return r.value=r.getAttribute("data-default")?r.getAttribute("data-default"):"m",e(t),!1})),(n=t.querySelector(".dp-button-current-location"))&&(n.addEventListener("click",(function(a){return a.preventDefault(),DPCalendar.currentLocation((function(n){a.target.closest(".dp-form").querySelector("[name=location]").value=n,e(t)})),!1})),!1 in navigator&&(n.style.display="none"))}))}))}))}();