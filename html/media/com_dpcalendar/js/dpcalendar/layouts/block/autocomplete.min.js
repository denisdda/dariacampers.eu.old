!function(){"use strict";
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */var e=window.DPCalendar||{};window.DPCalendar=e,e.autocomplete={},e.autocomplete.create=function(t){loadDPAssets(["/com_dpcalendar/js/dpcalendar/dpcalendar.js"],(function(){t.addEventListener("keydown",(function(l){var o=l.keyCode,a=t.parentElement.querySelector(".dp-autocomplete"),n=null;a&&(n=a.querySelector(".dp-autocomplete__result_selected")),// Enter
13===o&&n&&n.click(),// ESC or tab
27!==o&&9!==o||!a||(e.slideToggle(a),a.parentElement.removeChild(a)),// Down
40===o&&n&&n.nextElementSibling&&(n.classList.remove("dp-autocomplete__result_selected"),n.nextElementSibling.classList.add("dp-autocomplete__result_selected"),a.scrollTop=n.offsetTop),// Up
38===o&&n&&n.previousElementSibling&&(n.classList.remove("dp-autocomplete__result_selected"),n.previousElementSibling.classList.add("dp-autocomplete__result_selected"),a.scrollTop=n.offsetTop-30)})),t.addEventListener("keyup",e.debounce((function(e){var l=t.getAttribute("data-max-length")?t.getAttribute("data-max-length"):3;[13,27,38,40].includes(e.keyCode)||t.value.trim().length<l||t.dispatchEvent(new CustomEvent("dp-autocomplete-change"))}))),t.addEventListener("blur",(function(t){if(t.relatedTarget&&t.relatedTarget.classList.contains("dp-autocomplete__result"))return!0;var l=t.target.parentElement.querySelector(".dp-autocomplete");if(!l)return!0;e.slideToggle(l),l.parentElement.removeChild(l)}))}))},e.autocomplete.setItems=function(t,l){var o=t.parentElement.querySelector(".dp-autocomplete");o&&o.items==l||(o&&o.parentElement.removeChild(o),0!=l.length&&loadDPAssets(["/com_dpcalendar/js/popper/popper.js","/com_dpcalendar/js/dpcalendar/dpcalendar.js"],(function(){(o=document.createElement("div")).items=l,o.classList.add("dp-autocomplete"),t.parentElement.appendChild(o),l.forEach((function(e,l){var a=document.createElement("a");a.href="#",a.innerHTML="<strong>"+e.title+"</strong> <span>"+e.details+"</span>",a.classList.add("dp-autocomplete__result"),e.title==t.value&&a.classList.add("dp-autocomplete__result_selected"),a.addEventListener("click",(function(l){return l.preventDefault(),t.value=e.title,t.dispatchEvent(new CustomEvent("dp-autocomplete-select",{detail:e})),o.parentElement.removeChild(o),!1})),// Needed to disable blur when element is selected, in Safari the blur event is called before click
// https://stackoverflow.com/a/57630197/356375
a.addEventListener("mousedown",(function(e){return e.preventDefault()})),o.appendChild(a)})),l&&!o.querySelector(".dp-autocomplete__result_selected")&&o.querySelector(".dp-autocomplete__result").classList.add("dp-autocomplete__result_selected"),e.slideToggle(o,(function(){o.scrollTop=o.querySelector(".dp-autocomplete__result_selected").offsetTop})),Popper.createPopper(t,o,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:function(e){var t=e.state;t.styles.popper.width=t.rects.reference.width+"px"},phase:"beforeWrite",requires:["computeStyles"]}]})})))}}();