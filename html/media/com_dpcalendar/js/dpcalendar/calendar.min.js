function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){"use strict";
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */function e(e,t,r){
// Default local storage when empty
return null==localStorage.getItem(t.storageId)?(localStorage.setItem(t.storageId,JSON.stringify(t.calendarIds)),t.calendarIds):JSON.parse(localStorage.getItem(t.storageId)).filter((function(e){return-1!==t.calendarIds.indexOf(e)}))}
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */
function t(e){var t=[];return t.month="dayGridMonth",t.week="timeGridWeek",t.day="timeGridDay",t.list="list",t.resyear="resourceTimelineYear",t.resmonth="resourceTimelineMonth",t.resweek="resourceTimelineWeek",t.resday="resourceTimelineDay",//BC < 7.2
t.agendaWeek="timeGridWeek",t.agendaDay="timeGridDay",// If there are resources use the proper timegrid views
null!=e.resources&&(t.week="resourceTimeGridWeek",t.day="resourceTimeGridDay"),t}function r(e){var t=[];return t.dayGridMonth="month",t.timeGridWeek="week",t.timeGridDay="day",t.list="list",t.resourceTimelineYear="resyear",t.resourceTimelineMonth="resmonth",t.resourceTimelineWeek="resweek",t.resourceTimelineDay="resday",//BC < 7.2
t.agendaWeek="week",t.agendaDay="day",// If there are resources use the proper timegrid views
null!=e.resources&&(t.resourceTimeGridWeek="week",t.resourceTimeGridDay="day"),t}
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */function n(e,t,r){
// Setting the hash based on the actual view
var n="year="+e.getUTCFullYear()+"&month="+(e.getUTCMonth()+1)+"&day="+e.getUTCDate()+"&view="+t;r.use_hash&&window.location.hash.replace(/&amp;/gi,"&").replace("#","")!=n&&(window.location.hash=n)}
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */
/*
   * JavaScript MD5
   * https://github.com/blueimp/JavaScript-MD5
   *
   * Copyright 2011, Sebastian Tschan
   * https://blueimp.net
   *
   * Licensed under the MIT license:
   * https://opensource.org/licenses/MIT
   *
   * Based on
   * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
   * Digest Algorithm, as defined in RFC 1321.
   * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
   * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
   * Distributed under the BSD License
   * See http://pajhome.org.uk/crypt/md5 for more info.
   */
/*
   * Add integers, wrapping at 2^32. This uses 16-bit operations internally
   * to work around bugs in some JS interpreters.
   */
var a=function(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r},o=function(e,t,r,n,o,i){return a((l=a(a(t,e),a(n,i)))<<(d=o)|l>>>32-d,r);var l,d},i=function(e,t,r,n,a,i,l){return o(t&r|~t&n,e,t,a,i,l)},l=function(e,t,r,n,a,i,l){return o(t&n|r&~n,e,t,a,i,l)},d=function(e,t,r,n,a,i,l){return o(t^r^n,e,t,a,i,l)},c=function(e,t,r,n,a,i,l){return o(r^(t|~n),e,t,a,i,l)},s=function(e,t,r){var n=_slicedToArray(e,4),a=n[0],o=n[1],l=n[2],d=n[3];return a=i(a,o,l,d,t[r+0],7,-680876936),d=i(d,a,o,l,t[r+1],12,-389564586),l=i(l,d,a,o,t[r+2],17,606105819),o=i(o,l,d,a,t[r+3],22,-1044525330),a=i(a,o,l,d,t[r+4],7,-176418897),d=i(d,a,o,l,t[r+5],12,1200080426),l=i(l,d,a,o,t[r+6],17,-1473231341),o=i(o,l,d,a,t[r+7],22,-45705983),a=i(a,o,l,d,t[r+8],7,1770035416),d=i(d,a,o,l,t[r+9],12,-1958414417),l=i(l,d,a,o,t[r+10],17,-42063),o=i(o,l,d,a,t[r+11],22,-1990404162),a=i(a,o,l,d,t[r+12],7,1804603682),d=i(d,a,o,l,t[r+13],12,-40341101),l=i(l,d,a,o,t[r+14],17,-1502002290),[a,o=i(o,l,d,a,t[r+15],22,1236535329),l,d]},u=function(e,t,r){var n=_slicedToArray(e,4),a=n[0],o=n[1],i=n[2],d=n[3];return a=l(a,o,i,d,t[r+1],5,-165796510),d=l(d,a,o,i,t[r+6],9,-1069501632),i=l(i,d,a,o,t[r+11],14,643717713),o=l(o,i,d,a,t[r],20,-373897302),a=l(a,o,i,d,t[r+5],5,-701558691),d=l(d,a,o,i,t[r+10],9,38016083),i=l(i,d,a,o,t[r+15],14,-660478335),o=l(o,i,d,a,t[r+4],20,-405537848),a=l(a,o,i,d,t[r+9],5,568446438),d=l(d,a,o,i,t[r+14],9,-1019803690),i=l(i,d,a,o,t[r+3],14,-187363961),o=l(o,i,d,a,t[r+8],20,1163531501),a=l(a,o,i,d,t[r+13],5,-1444681467),d=l(d,a,o,i,t[r+2],9,-51403784),i=l(i,d,a,o,t[r+7],14,1735328473),[a,o=l(o,i,d,a,t[r+12],20,-1926607734),i,d]},p=function(e,t,r){var n=_slicedToArray(e,4),a=n[0],o=n[1],i=n[2],l=n[3];return a=d(a,o,i,l,t[r+5],4,-378558),l=d(l,a,o,i,t[r+8],11,-2022574463),i=d(i,l,a,o,t[r+11],16,1839030562),o=d(o,i,l,a,t[r+14],23,-35309556),a=d(a,o,i,l,t[r+1],4,-1530992060),l=d(l,a,o,i,t[r+4],11,1272893353),i=d(i,l,a,o,t[r+7],16,-155497632),o=d(o,i,l,a,t[r+10],23,-1094730640),a=d(a,o,i,l,t[r+13],4,681279174),l=d(l,a,o,i,t[r],11,-358537222),i=d(i,l,a,o,t[r+3],16,-722521979),o=d(o,i,l,a,t[r+6],23,76029189),a=d(a,o,i,l,t[r+9],4,-640364487),l=d(l,a,o,i,t[r+12],11,-421815835),i=d(i,l,a,o,t[r+15],16,530742520),[a,o=d(o,i,l,a,t[r+2],23,-995338651),i,l]},m=function(e,t,r){var n=_slicedToArray(e,4),a=n[0],o=n[1],i=n[2],l=n[3];return a=c(a,o,i,l,t[r],6,-198630844),l=c(l,a,o,i,t[r+7],10,1126891415),i=c(i,l,a,o,t[r+14],15,-1416354905),o=c(o,i,l,a,t[r+5],21,-57434055),a=c(a,o,i,l,t[r+12],6,1700485571),l=c(l,a,o,i,t[r+3],10,-1894986606),i=c(i,l,a,o,t[r+10],15,-1051523),o=c(o,i,l,a,t[r+1],21,-2054922799),a=c(a,o,i,l,t[r+8],6,1873313359),l=c(l,a,o,i,t[r+15],10,-30611744),i=c(i,l,a,o,t[r+6],15,-1560198380),o=c(o,i,l,a,t[r+13],21,1309151649),a=c(a,o,i,l,t[r+4],6,-145523070),l=c(l,a,o,i,t[r+11],10,-1120210379),i=c(i,l,a,o,t[r+2],15,718787259),[a,o=c(o,i,l,a,t[r+9],21,-343485551),i,l]},f=function(e,t){
/* append padding */
e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var r=[s,u,p,m];return Array.from({length:Math.floor(e.length/16)+1},(function(e,t){return 16*t})).reduce((function(t,n){return r.reduce((function(t,r){return r(t,e,n)}),t.slice()).map((function(e,r){return a(e,t[r])}))}),[1732584193,-271733879,-1732584194,271733878])},_=function(e){return Array(4*e.length).fill(8).reduce((function(t,r,n){return t+String.fromCharCode(e[n*r>>5]>>>n*r%32&255)}),"")},y=function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)})).reduce((function(e,t,r){var n=e.slice();return n[8*r>>5]|=(255&t)<<8*r%32,n}),[])},v=function(e){var t=function(e){return"0123456789abcdef".charAt(e)};return Array.from(e).map((function(e){return e.charCodeAt(0)})).reduce((function(e,r,n){return e+t(r>>>4&15)+t(15&r)}),"")},h=function(e){if("string"!=typeof e)throw new TypeError("parameter ‘unicodeString’ is not a string");var t=function(e){return e.charCodeAt(0)};return e.replace(/[\u0080-\u07ff]/g,(// U+0080 - U+07FF => 2 bytes 110yyyyy, 10zzzzzz
function(e){return String.fromCharCode(192|t(e)>>6,128|63&t(e))})).replace(/[\u0800-\uffff]/g,(// U+0800 - U+FFFF => 3 bytes 1110xxxx, 10yyyyyy, 10zzzzzz
function(e){return String.fromCharCode(224|t(e)>>12,128|t(e)>>6&63,128|63&t(e))}))},E=function(e){return t=h(e),_(f(y(t),8*t.length));var t},A=function(e,t){return r=h(e),n=h(t),a=y(r),o=Array(16).fill(909522486),i=Array(16).fill(1549556828),a.length>16&&(a=f(a,8*r.length)),a.forEach((function(e,t){o[t]=909522486^e,i[t]=1549556828^e})),_(f(i.concat(f(o.concat(y(n)),512+8*n.length)),640));var r,n,a,o,i},D=function(e,t,r){return t?r?A(t,e):v(A(t,e)):r?E(e):v(E(e))};
/*
   * Bitwise rotate a 32-bit number to the left.
   */
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */
function g(a,o){
// Fullcalendar needs to be loaded first
loadDPAssets(["/com_dpcalendar/js/fullcalendar/fullcalendar.js","/com_dpcalendar/css/fullcalendar/fullcalendar.css"],(function(){var i=["/com_dpcalendar/js/popper/popper.js"];o.resources&&(i.push("/com_dpcalendar/css/scheduler/scheduler.css"),i.push("/com_dpcalendar/js/scheduler/scheduler.js")),loadDPAssets(i,(function(){a.parentElement.parentElement.querySelector(".dp-loader").classList.add("dp-loader_hidden");var i=t(o),l=r(o);o.storageId=a.getAttribute("data-options")+"-calendar-state-"+D(o.calendarIds.toString()),function(e,n){var a=t(n),o=r(n);if(n.use_hash)for(
// Parsing the hash
var i=window.location.hash.replace(/&amp;/gi,"&").split("&"),l=0;l<i.length;l++)i[l].match("^#year")&&(n.year=i[l].substring(6)),i[l].match("^month")&&(n.month=i[l].substring(6)),i[l].match("^day")&&(n.date=i[l].substring(4)),i[l].match("^view")&&(n.defaultView=i[l].substring(5));n.defaultDate=new Date(n.year+"-"+DPCalendar.pad(parseInt(n.month),2)+"-"+DPCalendar.pad(n.date,2)),n.timeZone=Joomla.getOptions("DPCalendar.timezone"),n.defaultView=a[n.defaultView],// Loading the list view when we have a small screen
document.body.clientWidth<n.screen_size_list_view&&"day"!=o[n.defaultView]&&(n.defaultView=a.list),n.schedulerLicenseKey="GPL-My-Project-Is-Open-Source",n.progressiveEventRendering=!0,n.weekNumberTitle="",// Translations
n.eventLimitText=Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_MORE"),n.allDayText=Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_ALL_DAY"),n.buttonText={today:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_TOOLBAR_TODAY"),year:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_YEAR"),month:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_MONTH"),week:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_WEEK"),day:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_DAY"),list:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_LIST")},n.listTexts={until:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_UNTIL"),past:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_PAST"),today:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_TODAY"),tomorrow:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_TOMORROW"),thisWeek:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_THIS_WEEK"),nextWeek:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_NEXT_WEEK"),thisMonth:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_THIS_MONTH"),nextMonth:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_NEXT_MONTH"),future:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_FUTURE"),week:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_VIEW_TEXTS_WEEK")}}
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */(0,o),function(e,t){
// Drag and drop support
t.eventDragStart=function(e){e.el._tippy&&e.el._tippy.destroy()},t.eventDrop=function(e){if(e.event.resourceId)
// @Todo implement resource drop
return e.revert(),!1;DPCalendar.request("task=event.move&Itemid="+Joomla.getOptions("DPCalendar.itemid"),(function(t){if(t.data.url&&e.event.setProp("url",t.data.url),t.data.description&&e.event.setExtendedProp("description",t.data.description),t.success)if(null!=t.messages){for(var r in t.messages)if("message"!=r)return void e.revert()}else e.revert();else e.revert()}),"id="+e.event.id+"&minutes="+moment.duration(e.delta).asMinutes()+"&allDay="+e.event.allDay)},// Resize support
t.eventResize=function(e){e.el._tippy&&e.el._tippy.destroy(),DPCalendar.request("task=event.move&Itemid="+Joomla.getOptions("DPCalendar.itemid"),(function(t){if(t.data.url&&e.event.setProp("url",t.data.url),t.data.description&&e.event.setExtendedProp("description",t.data.description),t.success)if(null!=t.messages){for(var r in t.messages)if("message"!=r)return void e.revert()}else e.revert();else e.revert()}),"id="+e.event.id+"&minutes="+moment.duration(e.endDelta).asMinutes()+"&onlyEnd=1&allDay="+e.event.allDay)}}
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */(0,o),function(e,r){var a=t(r);// Handling clicking on an event
r.eventClick=function(t){t.jsEvent.preventDefault(),t.jsEvent.currentTarget._tippy&&t.jsEvent.currentTarget._tippy.hide(),2!=r.show_event_as_popup&&(1==r.show_event_as_popup?
// Opening the modal box
DPCalendar.modal(t.event.url,e.dataset.popupwidth,e.dataset.popupheight,(function(t){
// Check if there is a system message
var r=t.contentDocument||t.contentWindow.document;!r.getElementById("system-message-container")||r.getElementById("system-message-container").children.length<1||// Probably something has changed
e.refetchEvents()})):
// Just navigate to the event
window.location=DPCalendar.encode(t.event.url))},r.dateClick=function(t){var o=e.parentElement.querySelector(".dp-quickadd .dp-form"),i=moment.utc(t.date);if(o){t.jsEvent.preventDefault(),// Setting some defaults on the quick add popup form
t.view.type==a.month&&(i.hours(8),i.minutes(0));var l=o.querySelector("#jform_start_date");l.value=i.format(l.getAttribute("data-format")),l.actualDate=l.value,(l=o.querySelector("#jform_start_date_time")).value=i.format(l.getAttribute("data-format")),l.actualDate=l.value,i.add(1,"hours");var d=o.querySelector("#jform_end_date");// Set location information
if(d.value=i.format(d.getAttribute("data-format")),d.actualDate=d.value,(d=o.querySelector("#jform_end_date_time")).value=i.format(d.getAttribute("data-format")),d.actualDate=d.value,t.resource){var c=t.resource.id.split("-");o.querySelector('input[name="jform[location_ids][]"]').value=[c[0]],c.length>1&&(o.querySelector('input[name="jform[rooms][]"]').value=[t.resource.id])}1==r.event_create_form&&window.innerWidth>600?(Popper.createPopper(t.jsEvent.target,o.parentElement,{onFirstUpdate:function(e){e.elements.popper.querySelector("#jform_title").focus()}}),o.parentElement.style.display="block"):(
// Open the edit page
o.querySelector("input[name=task]").value="",o.submit())}else r.header.right.indexOf(a.day)>0&&n(t.date,"day",r)},document.body.addEventListener("click",(function(e){return!(e.target&&e.target.closest(".dp-event-tooltip__action-delete")&&!confirm(Joomla.JText._("COM_DPCALENDAR_CONFIRM_DELETE"))&&(e.preventDefault(),1))}))}
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */(a,o),function(e,t){
// Custom buttons
t.customButtons={},t.header.left.indexOf("datepicker")&&(t.customButtons.datepicker={text:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_SHOW_DATEPICKER"),icon:"icon-calendar",click:function(){loadDPAssets(["/com_dpcalendar/js/moment/moment.js"],(function(){loadDPAssets(["/com_dpcalendar/js/pikaday/pikaday.js","/com_dpcalendar/css/pikaday/pikaday.css"],(function(){var a=document.querySelector(".fc-datepicker-button"),o=a.querySelector("input");if(!o){(o=document.createElement("input")).setAttribute("type","hidden"),o.id="datepicker-input",a.appendChild(o);var i=Joomla.getOptions("DPCalendar.calendar.names");o.dpPicker=new Pikaday({field:o,trigger:a,i18n:{months:i.monthNames,weekdays:i.dayNames,weekdaysShort:i.dayNamesShort},onSelect:function(a){n(new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0)),r(t)[e.dpCalendar.view.type],t)}})}o.dpPicker.show()}))}))}}),t.header.left.indexOf("print")&&(t.customButtons.print={text:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_TOOLBAR_PRINT"),icon:"icon-print",click:function(){var e=document.location.href.replace(/\?/,"?layout=print&tmpl=component&");e==document.location.href&&(e=document.location.href.replace(/#/,"?layout=print&tmpl=component#")),window.open(e).focus()}}),t.header.left.indexOf("add")&&t.event_create_url&&(t.customButtons.add={text:Joomla.JText._("COM_DPCALENDAR_VIEW_CALENDAR_TOOLBAR_PRINT"),icon:"icon-add",click:function(){location.href=t.event_create_url}})}(a,o),function(e,n){if(n.use_hash){var a=t(n),o=r(n);// Listening for hash/url changes
window.addEventListener("hashchange",(function(){var t=new Date,r=t.getUTCFullYear(),i=t.getUTCMonth()+1,l=t.getUTCDate(),d=o[n.defaultView];window.location.hash.replace(/&amp;/gi,"&").split("&").forEach((function(e){e.match("^#year")&&(r=e.substring(6)),e.match("^month")&&(i=e.substring(6)-1),e.match("^day")&&(l=e.substring(4)),e.match("^view")&&(d=e.substring(5))}));var c=new Date(Date.UTC(r,i,l,0,0,0)),s=e.dpCalendar.getDate(),u=e.dpCalendar.view;c.getUTCFullYear()==s.getUTCFullYear()&&c.getUTCMonth()==s.getUTCMonth()&&c.getUTCDate()==s.getUTCDate()||e.dpCalendar.gotoDate(c),u.type!=a[d]&&e.dpCalendar.changeView(a[d])}))}}(a,o),
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */
function(r,n){var a=t(n);r.dpEventMarkerSet=[],n.datesDestroy=function(e){var t=r.parentElement.querySelector(".dp-map");DPCalendar.Map&&null!=t&&n.show_map&&(r.dpEventMarkerSet=[],DPCalendar.Map.clearMarkers(t))},n.eventRender=function(e){
// Support HTML in title
var t=e.el.querySelector(".fc-title, .fc-list-item-title a");t&&(t.innerHTML=t.textContent),// Add a class if available
e.event.view_class&&e.el.classList.add(e.event.view_class);var o=e.event.extendedProps.description;o&&(
// Adding the hash to the url for proper return
o=(o=o.replace("task=event.delete","task=event.delete&urlhash="+encodeURIComponent(window.location.hash))).replace("task=event.edit","task=event.edit&urlhash="+encodeURIComponent(window.location.hash)),e.isMirror||loadDPAssets(["/com_dpcalendar/js/tippy/tippy.js","/com_dpcalendar/css/tippy/tippy.css"],(function(){document.createElement("div").innerHTML=o,tippy(e.el,{interactive:!0,delay:100,arrow:!0,content:o,allowHTML:!0,ignoreAttributes:!0,appendTo:document.body,popperOptions:{modifiers:[{name:"preventOverflow",enabled:!1},{name:"hide",enabled:!1}]}})}))),e.event.extendedProps.fgcolor&&e.view.type!=a.list&&(e.el.style.color=e.event.extendedProps.fgcolor);var i=r.parentElement.querySelector(".dp-map");DPCalendar.Map&&null!=i&&n.show_map&&e.event.extendedProps.location&&// Adding the locations to the map
e.event.extendedProps.location.forEach((function(t){if(!r.dpEventMarkerSet[e.event.id+" "+t.latitude+" "+t.longitude]){var n=JSON.parse(JSON.stringify(t));n.title=e.event.title,n.color=e.event.backgroundColor,e.event.url&&o&&(o=o.replace(e.event.title,'<a href="'+e.event.url+'">'+e.event.title+"</a>")),n.description=o,r.dpEventMarkerSet[e.event.id+" "+t.latitude+" "+t.longitude]=n,DPCalendar.Map.createMarker(i,n)}}))},// Handling the messages in the returned data
n.eventDataTransform=function(e){if(e.allDay){var t=moment(e.end);t.add(1,"day"),e.end=t.format("YYYY-MM-DD")}return e},// Spinner handling
n.loading=function(e){e?r.parentElement.parentElement.querySelector(".dp-loader").classList.remove("dp-loader_hidden"):r.parentElement.parentElement.querySelector(".dp-loader").classList.add("dp-loader_hidden")},n.eventSources=[],e(0,n,DPCalendar).forEach((function(e,t){n.eventSources[t]={id:e,events:function(t,r,a){DPCalendar.request(n.requestUrlRoot+"&ids="+e+"&date-start="+t.startStr+"&date-end="+t.endStr,(function(e){return r(e.data)}),null,!1)}}}))}(a,o),function(t,r,n){
// Get the calendar ids from the local storage
var a=e(0,r),o=t.parentElement,i=o.querySelector(".com-dpcalendar-calendar__toggle");// Toggle the list of calendars
i&&i.addEventListener("click",(function(){n.slideToggle(o.querySelector(".com-dpcalendar-calendar__list"),(function(e){e?(o.querySelector('[data-direction="up"]').style.display="inline",o.querySelector('[data-direction="down"]').style.display="none"):(o.querySelector('[data-direction="up"]').style.display="none",o.querySelector('[data-direction="down"]').style.display="inline")}))})),// Modify the calendar list
[].slice.call(t.parentElement.querySelectorAll(".com-dpcalendar-calendar__list .dp-input-checkbox")).forEach((function(e){a.forEach((function(t){t==e.value&&(e.checked=!0)})),e.addEventListener("click",(function(){var o=e.value;e.checked?(t.dpCalendar.addEventSource({id:o,events:function(e,t,a){n.request(r.requestUrlRoot+"&ids="+o+"&date-start="+e.startStr+"&date-end="+e.endStr,(function(e){return t(e.data)}),null,!1)}}),a.push(o)):(t.dpCalendar.getEventSources().forEach((function(e){e.id==o&&e.remove()})),a.forEach((function(e,t){e==o&&a.splice(t,1)}))),localStorage.setItem(r.storageId,JSON.stringify(a))}))}));// The toggle all checkbox
var l=document.querySelector(".com-dpcalendar-calendar__list-toggle .dp-input-checkbox");l&&l.addEventListener("click",(function(){[].slice.call(document.querySelectorAll(".com-dpcalendar-calendar__calendar-description .dp-input-checkbox")).forEach((function(e){e.checked=!l.checked,e.click()}))}))}(a,o,DPCalendar);var d=Joomla.getOptions("DPCalendar.calendar.names");moment.updateLocale("en",{months:d.monthNames,monthsShort:d.monthNamesShort,weekdays:d.dayNames,weekdaysShort:d.dayNamesShort,weekdaysMin:d.dayNamesMin}),o.plugins=["dayGrid","timeGrid","list","interaction","moment"];var c=o.views;o.views={},Object.keys(c).forEach((function(e){var t=c[e].titleFormat;c[e].titleFormat=function(r){return"list"==e||"week"==e?moment(r.start).format(t)+" - "+moment(r.end).format(t):moment(r.start).format(t)},o.views[i[e]]=c[e]}));var s="";o.header.right.split(",").forEach((function(e,t){s+=i[e]+","})),o.header.right=s,-1!=s.indexOf("resource")?(o.plugins.push("resourceTimeline"),o.plugins.push("resourceTimeGrid")):o.resources&&o.plugins.push("resourceTimeGrid"),o.datesRender=function(e){n(a.dpCalendar.getDate(),l[e.view.type],o),function(e){var t=function(t,r){var n=e.parentElement.querySelector(".dp-icon_"+t),a=e.parentElement.querySelector(".fc-"+r+"-button .fc-icon");null!==n&&null!==a&&a.appendChild(n.cloneNode(!0))};t("angle-left","prev"),t("angle-right","next"),t("calendar","datepicker"),t("print","print"),t("plus","add")}(a)};var u=new FullCalendar.Calendar(a,o);a.dpCalendar=u,u.render()}))}))}
/**
   * @package   DPCalendar
   * @author    Digital Peak http://www.digital-peak.com
   * @copyright Copyright (C) 2007 - 2020 Digital Peak. All rights reserved.
   * @license   http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
   */[].slice.call(document.querySelectorAll(".dp-calendar")).forEach((function(e){e.getAttribute("data-options")&&loadDPAssets(["/com_dpcalendar/js/moment/moment.js","/com_dpcalendar/js/dpcalendar/dpcalendar.js"],(function(){var t=Joomla.getOptions(e.getAttribute("data-options"));"string"==typeof(t=Object.assign(t,e.dataset)).hiddenDays&&(t.hiddenDays=JSON.parse(t.hiddenDays)),g(e,t)}))}))}();